
<Card>
    <CardBody>
        <div class="d-flex flex-row align-items-center">
            Приоритет -
            @if (Task.Priority == (int)TaskPriority.High)
            {
                <i class="ms-1 text-primary">Высокий</i>
                <Icon class="ms-1" Name="IconName.ArrowUpCircleFill" Size="IconSize.x5" Color="IconColor.Primary"/>
            }
            else
            {
                <i class="ms-1 text-secondary">Обычный</i>
            }
            <div class="col d-flex justify-content-end">
                <Tool IconName="IconName.ArrowDownUp" TooltipPlacement="TooltipPlacement.Top"
                    Disabled="Disabled"
                    TooltipTitle="Изменить" 
                    OnClick="() => Task.Priority = Task.Priority == (int)TaskPriority.High 
                        ? (int)TaskPriority.Regular 
                        : (int)TaskPriority.High"/>
            </div>
        </div>
        <div class="mt-1">
            Создана:
            <span class="small ms-2">@Task.Created.ToString("d MMM yyyy г., HH:mm")</span>
            <i class="fw-light">
                - @Task.CreatedBy?.DisplayName
            </i>
        </div>
        <div class="mt-1">
            Обновлено:
            <span class="small ms-2">@Task.Updated.ToString("d MMM yyyy г., HH:mm")</span>
        </div>
        <div class="mt-1 d-flex flex-row align-items-center">
            Дата начала: 
            @if (isStartDateEditMode)
            {
                <InputDate class="ms-2" @bind-Value="@Task.StartDate" style="max-width: 150px;" />
            }
            else
            {
                @if (Task.StartDate is { })
                {
                    <span class="small ms-2">@Task.StartDate?.ToString("d MMM yyyy г.")</span>
                }
                else
                {
                    <i class="text-secondary fw-lighter ms-2"> Не установлена</i>
                }
            }            
            <div class="col d-flex justify-content-end">
                <Tool IconName="@(isStartDateEditMode ? IconName.PencilFill : IconName.Pencil)" 
                    Disabled="Disabled"
                    TooltipTitle="@(isStartDateEditMode ? "Прекратить" : "Изменить")" 
                    OnClick="() => isStartDateEditMode = !isStartDateEditMode"/>
            </div>
        </div>
        <div class="mt-1 d-flex flex-row align-items-center">
            Крайний срок: 
            @if (isDeadlineEditMode)
            {
                <InputDate class="ms-2" @bind-Value="@Task.Deadline" style="max-width: 150px;" />
            }
            else
            {
                @if (Task.Deadline is { })
                {
                    <span class="small ms-2">@Task.Deadline?.ToString("d MMM yyyy г.")</span>
                }
                else
                {
                    <i class="text-secondary fw-lighter ms-2"> Не установлен</i>
                }
            }            
            <div class="col d-flex justify-content-end">
                <Tool IconName="@(isDeadlineEditMode ? IconName.PencilFill : IconName.Pencil)" 
                    Disabled="Disabled"
                    TooltipTitle="@(isDeadlineEditMode ? "Прекратить" : "Изменить")" 
                    OnClick="() => isDeadlineEditMode = !isDeadlineEditMode"/>
            </div>
        </div>
    </CardBody>
</Card>

@code {
    private bool isStartDateEditMode;
    private bool isDeadlineEditMode;
    [Parameter] public Onlyoffice.Api.Models.Task Task { get; set; } = null!;
    [Parameter] public bool Disabled { get; set; }
}
