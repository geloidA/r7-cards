@implements IDisposable

<Smooth ShowOnFirstRender >
    <KolBoardColumn
        CommonHeightByKey="CommonHeightByKey"
        Width="365"
        @key="Status.Id"
        ItemSpacing="10"
        TValue="OnlyofficeTask"
        Virtualized
        EstimateHeight="150"
        Overscan="5"
        CanItemDrag="@(x => x.CanEdit)"
        KeySelector="x => x.Id"
        Items="_tasks" 
        ShowDropPlaceholder
        DropPlaceholderDelay="TimeSpan.FromMilliseconds(250)"
        OnDropItem="@(async task => await OnChangeTaskStatus(task, Status))" >
        
        <HeaderTemplate Context="isCollapsed">
            <TaskStatusHeader TaskStatus="@Status" />
            @if (State is IFilterableProjectState { TaskFilter.Filters.Count: > 0 })
            {
                <div class="mt-1 d-flex justify-content-center fw-light" style="font-size: small;">
                    @_tasks.Count результатов
                </div>
            }
        </HeaderTemplate>
        
        <ItemTemplate>
            <TaskCard Task="context" />
        </ItemTemplate>

        <DropPlaceholderTemplate>
            <div class="card-placeholder"></div>
        </DropPlaceholderTemplate>
    </KolBoardColumn>
</Smooth>