@using Onlyoffice.Api.Models

@inherits KolComponentBase

<FluentIcon Value="Icon" OnClick="TogglePriority" Style="@Style" Class="@Class" Title="@IconTitle" />

@code {
    [CascadingParameter] TaskUpdateData Task { get; set; } = null!;
    [Parameter] public bool Disabled { get; set; }

    bool IsHighPriority => Task.Priority == (int)Priority.High;

    private string IconTitle => IsHighPriority ? "Приоритет - Высокий" : "Приоритет - Обычный";        

    Icon Icon => IsHighPriority 
        ? new Icons.Filled.Size24.ArrowCircleUp() 
        : new Icons.Regular.Size24.ArrowCircleUp();

    void TogglePriority()
    {
        if (Disabled) return;
        Task.Priority = IsHighPriority ? (int)Priority.Regular : (int)Priority.High;
    }
}