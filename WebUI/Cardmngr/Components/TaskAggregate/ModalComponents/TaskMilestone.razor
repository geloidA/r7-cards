@using Onlyoffice.Api.Models

<Card >
    <CardBody class="d-flex flex-column">
        <CardTitle>
            <div class="row d-flex align-items-center">
                <div class="col"> 
                    <Icon Name="IconName.Star" />
                    Веха
                </div>
                <div class="col d-flex justify-content-end">
                    <Tool Disabled="@Disabled" IconName="IconName.Pencil" IconSize="IconSize.x6"
                        TooltipTitle="Изменить" OnClick="@ShowSelectionModalAsync" />
                    <div class="ms-3">
                        <Tool Disabled="@(Disabled || Task.MilestoneId == null)" IconName="IconName.X" IconSize="IconSize.x6"
                            TooltipTitle="Удалить" OnClick="@DeleteMilestone" />
                    </div>
                </div>
            </div>
        </CardTitle>
        @if (Task.MilestoneId is { })
        {
            <div>
                <MilestoneLabel Milestone="@(State.GetMilestone(Task.MilestoneId))" />
            </div>
        }
        else
        {
            <span class="text-secondary">Вне вехи</span>
        }
    </CardBody>
</Card>

@code {
    private static RenderFragment<Milestone> RenderMilestone = milestone =>
        @<div class="py-1 px-1 d-flex align-items-center">
            <Badge Color="BadgeColor.Warning" IndicatorType="BadgeIndicatorType.RoundedPill"
                style="max-width: 425px; overflow: hidden;">
                @milestone.Title
            </Badge>
        </div>;
}
