<Smooth ShowOnFirstRender Delay="TimeSpan.FromMilliseconds(500)">
    <div class="task-card default-text @Task.CssDeadline()" @onclick="openModalAction" >
        <div class="flex @CssMarginTitle">
            @if (Task.Priority == Priority.High)
            {
                <FluentIcon Value="@(new Icons.Filled.Size20.ArrowCircleUp())" Color="Color.Accent" 
                    Title="Приоритет - Высокий" Style="margin-right: 5px; min-width: 20px;" />
            }
            <div class="font-bold text-base max-height-100 title pre-wrap">@Task.Title</div>
        </div>
        @if (Task.Description is not null)
        {
            <div class="font-light max-height-100 title pre-wrap" >
                @Task.Description
            </div>
        }
        @if (Task.Subtasks.Count > 0)
        {
            <div class=" flex justify-end">
                + @Task.Subtasks.Count подзадачи
            </div>
        }
        @if (Task.MilestoneId is not null)
        {
            <MilestoneLabel class="flex justify-end align-baseline me-1" 
                Milestone="@State.GetMilestone(Task.MilestoneId)" />
        }
        @if (Task.Responsibles.Count > 0)
        {
            <ResponsiblesView Responsibles="@Task.Responsibles" ImageSize="25" ShowName="true" MaxCount="2" />
        }
        @if (Task.Tags.Count > 0)
        {
            <div class="flex flex-wrap gap-1">
                @foreach (var tag in Task.Tags)
                {
                    <TaskTagLabel Tag="tag" Color="@TagColorGetter.GetColor(tag)" />
                }
            </div>
        }
        @if (Task.Deadline is not null)
        {
            <FluentSpacer />
            <div class="flex p-0 text-xs justify-end items-center">
                @if (Task.IsDeadlineOut())
                {
                    <span class="deadline-msg text-error">
                        @GetDeadlineString()
                    </span>
                    <FluentSpacer />
                    <FluentIcon Value="@(new Icons.Regular.Size16.Fire())" Color="Color.Error" />
                }
                else if (Task.IsSevenDaysDeadlineOut())
                {
                    <FluentIcon Value="@(new Icons.Filled.Size16.Warning())" Color="Color.Warning" />
                }
                <span class="ms-2
                    @(Task.IsDeadlineOut() ? "text-error" : Task.IsSevenDaysDeadlineOut() ? "text-warning" : "")" >
                    Крайний срок:
                    @Task.Deadline?.ToString("d MMM yyyy г.")
                </span>
            </div>
        }
    </div>
</Smooth>