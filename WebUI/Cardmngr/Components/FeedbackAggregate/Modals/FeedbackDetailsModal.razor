@using Cardmngr.Shared.Feedbacks

@inherits AddEditModalBase<Feedback, FeedbackUpdateData>

@if (buffer is { })
{
    <Cardmngr.Components.Modals.MyBlazored.Offcanvas Placement="MyOffcanvasPlacement.End" Class="my-offcanvas my-offcanvas-right"
        @ref="currentModal">
        <EditForm Model="buffer" OnValidSubmit="SubmitAsync" >
            <FluentValidationValidator />
            <OffcanvasHeader Class="py-0" Style="padding-top: 20px !important;">
                <TitleChanger @ref="titleChanger" Disabled="@(!CanEdit)" @bind-Title="@buffer.Title" />
            </OffcanvasHeader>
            <ValidationMessage For="() => buffer.Title" class="ms-3 validation-msg" />
            <OffcanvasBody Class="d-flex flex-column">
                <DescriptionChanger Disabled="@(!CanEdit)" Class="mt-2" @bind-Description="@buffer.Description" />
            </OffcanvasBody>
            @if (!IsAdd)
            {
                <div class="mt-2 px-3">
                    <UserBadge User="Model!.Creator" Title="Создатель" />
                </div>
            }
            <div class="d-flex ms-3 flex-row">
                <FluentButton Disabled="@(!CanEdit)" Type="ButtonType.Submit" >
                    @SubmitText
                </FluentButton>
                @if (!IsAdd)
                {
                    <FluentButton Class="ms-2" Disabled="@(!CanEdit)"
                            OnClick="DeleteAsync" >
                            Удалить
                    </FluentButton>
                }
            </div>
        </EditForm>
    </Cardmngr.Components.Modals.MyBlazored.Offcanvas>
}
